(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n.p+"static/media/spinner.8cde2f6b.svg"},26:function(e,t,n){e.exports=n.p+"static/media/close.629b03c8.svg"},27:function(e,t,n){e.exports=n.p+"static/media/cog.c952e3bb.svg"},32:function(e,t,n){e.exports=n(68)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),i=n(7),l=(n(41),n(22)),s=n(23),u=n(31),p=n(24),d=n(30),h=n(2),m=(n(42),n(43),function(e){var t=e.text,n=e.children;return r.a.createElement("h1",{className:"Joke"},n," ",r.a.createElement("span",null,t))}),f=n(25),v=n.n(f),k=(n(44),function(e){return e.show?r.a.createElement("div",{className:"Spinner"},r.a.createElement("img",{src:v.a,className:"Spinner-icon",alt:"spinner"})):null});k.defaultProps={show:!1};var g=k,b=(n(45),n(26)),O=n.n(b),E=function(e){var t=e.open,n=e.title,a=e.handleClose,o=e.children,c=t?"open":"close";return r.a.createElement("div",{className:"Modal ".concat(c),onClick:function(e){return e.stopPropagation()}},r.a.createElement("section",{className:"Modal-content"},r.a.createElement("header",{className:"Modal-content-header"},r.a.createElement("span",null,n),r.a.createElement("div",{className:"Modal-close",onClick:a},r.a.createElement("img",{src:O.a,className:"Modal-close-icon",alt:"close"}))),r.a.createElement("div",{className:"Modal-content-body"},o)))};E.defaultProps={open:!1,title:"Modal Header",handleClose:function(){}};var C=E,j=n(27),y=n.n(j),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).heroInput=r.a.createRef(),n.handleClick=n.handleClick.bind(Object(h.a)(Object(h.a)(n))),n.handleSettingClick=n.handleSettingClick.bind(Object(h.a)(Object(h.a)(n))),n.handleModalClose=n.handleModalClose.bind(Object(h.a)(Object(h.a)(n))),n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRandomJoke()}},{key:"handleClick",value:function(e){this.props.joke.isLoading||this.props.fetchRandomJoke()}},{key:"handleSettingClick",value:function(e){e.stopPropagation(),this.props.openModal()}},{key:"handleChange",value:function(e){var t=this.heroInput.current.value;t?(this.props.changeAppHero(t),this.props.closeModal(),this.heroInput.current.style.borderColor="#dddddd"):this.heroInput.current.style.borderColor="#f44336"}},{key:"handleModalClose",value:function(){this.props.closeModal()}},{key:"renderJoke",value:function(){var e=this.props.joke,t=e.randomJoke,n=e.isLoading,a=e.error;return a?r.a.createElement("h2",{className:"App-has-error"},a):r.a.createElement(m,{text:t||""},r.a.createElement(g,{show:n}))}},{key:"renderSettingBar",value:function(){return this.props.joke.error?null:r.a.createElement("aside",{className:"App-setting-bar"},r.a.createElement("button",{className:"App-button",onClick:this.handleSettingClick},r.a.createElement("img",{src:y.a,className:"App-button-icon",alt:"cog"})))}},{key:"renderModal",value:function(){var e=this.props.app.hero,t=this.props.modal.isOpen;return r.a.createElement(C,{open:t,title:"Joke Hero",handleClose:this.handleModalClose},r.a.createElement("div",{className:"App-hero-form"},r.a.createElement("input",{type:"text",className:"App-hero-input",defaultValue:e,ref:this.heroInput}),r.a.createElement("button",{className:"App-button App-hero-button",onClick:this.handleChange},"Change")))}},{key:"render",value:function(){return r.a.createElement("main",{className:"App",onClick:this.handleClick},this.renderJoke(),this.renderSettingBar(),this.renderModal())}}]),t}(a.Component),N=n(12),M=n.n(N),J=n(28),A=n(48),S=function(){var e="https://api.icndb.com";return{hero:"Chuck Norris",fetchRandomJoke:function(){return A.get("".concat(e,"/jokes/random?escape=javascript")).then(function(e){var t=e.data;return t&&"success"===t.type?Promise.resolve(decodeURIComponent(t.value.joke)):Promise.reject()}).catch(function(){throw new Error("Could not fetch a random joke =(")})}}}();function H(e,t,n){var a=new RegExp(t,"g");return e.replace(a,n)}var R="FETCH_RANDOM_JOKE",_="FETCH_RANDOM_JOKE_SUCCESS",x="FETCH_RANDOM_JOKE_FAILURE",D="CHANGE_RANDOM_JOKE_HERO";var I="CHANGE_APP_HERO";function L(e){return function(t,n){var a=n().app.hero;t({type:I,hero:e}),t(function(e,t){return{type:D,oldHero:e,newHero:t}}(a,n().app.hero))}}var P="OPEN_MODAL",T="CLOSE_MODAL";var B=Object(i.b)(function(e){return{app:e.app,joke:e.joke,modal:e.modal}},function(e){return{fetchRandomJoke:function(){return e(function(){var e=Object(J.a)(M.a.mark(function e(t,n){var a,r,o,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.app,t({type:R}),e.prev=2,e.next=5,S.fetchRandomJoke();case 5:o=e.sent,t({type:_,randomJoke:H(o,S.hero,r.hero)}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c=e.t0.message,t({type:x,error:c});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t,n){return e.apply(this,arguments)}}())},changeAppHero:function(t){return e(L(t))},openModal:function(){return e({type:P})},closeModal:function(){return e({type:T})}}})(w);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=n(4),K=n(29),U=n(3),G=S.hero,W={hero:G};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(U.a)({},e,{hero:t.hero||G});default:return e}},$={randomJoke:null,isLoading:!1,error:null};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(U.a)({},e,{isLoading:!0});case _:return Object(U.a)({},e,{randomJoke:t.randomJoke,error:null,isLoading:!1});case x:return Object(U.a)({},e,{error:t.error,isLoading:!1});case D:return Object(U.a)({},e,{randomJoke:H(e.randomJoke,t.oldHero,t.newHero)});default:return e}},z={isOpen:!1};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;switch((arguments.length>1?arguments[1]:void 0).type){case P:return Object(U.a)({},e,{isOpen:!0});case T:return Object(U.a)({},e,{isOpen:!1});default:return e}},X=Object(F.c)({app:V,joke:q,modal:Q});var Y,Z=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(t){return}}(),ee=(Y=Z,Object(F.d)(X,Y,Object(F.a)(K.a)));ee.subscribe(function(e,t){var n,a;return function(){var r=this,o=arguments;a?(clearTimeout(n),n=setTimeout(function(){Date.now()-a>=t&&(e.apply(r,o),a=Date.now())},t-(Date.now()-a))):(e.apply(r,o),a=Date.now())}}(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.error(n.message||"Something went wrong!")}}({app:ee.getState().app})},1e3)),c.a.render(r.a.createElement(i.a,{store:ee},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.03e25897.chunk.js.map