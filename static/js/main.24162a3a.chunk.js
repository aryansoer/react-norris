(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n.p+"static/media/spinner.8cde2f6b.svg"},26:function(e,t,n){e.exports=n.p+"static/media/close.629b03c8.svg"},27:function(e,t,n){e.exports=n.p+"static/media/cog.c952e3bb.svg"},32:function(e,t,n){e.exports=n(69)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),i=n(7),l=(n(41),n(22)),s=n(23),u=n(31),p=n(24),d=n(30),h=n(2),m=(n(42),n(43),function(e){var t=e.text,n=e.children;return r.a.createElement("h1",{className:"JokeCard"},n," ",r.a.createElement("span",null,t))}),f=(n(44),function(e){var t=e.error,n=e.children;return r.a.createElement("h2",{className:"JokeError"},n," ",r.a.createElement("span",null,t))});f.defaultProps={error:"Something went wrong!"};var v=f,k=n(25),g=n.n(k),b=(n(45),function(e){return e.show?r.a.createElement("div",{className:"Spinner"},r.a.createElement("img",{src:g.a,className:"Spinner-icon",alt:"spinner"})):null});b.defaultProps={show:!1};var E=b,O=(n(46),n(26)),C=n.n(O),j=function(e){var t=e.open,n=e.title,a=e.handleClose,o=e.children,c=t?"open":"close";return r.a.createElement("div",{className:"Modal ".concat(c),onClick:function(e){return e.stopPropagation()}},r.a.createElement("section",{className:"Modal-content"},r.a.createElement("header",{className:"Modal-content-header"},r.a.createElement("span",null,n),r.a.createElement("div",{className:"Modal-close",onClick:a},r.a.createElement("img",{src:C.a,className:"Modal-close-icon",alt:"close"}))),r.a.createElement("div",{className:"Modal-content-body"},o)))};j.defaultProps={open:!1,title:"Modal Header",handleClose:function(){}};var w=j,y=n(27),N=n.n(y),J=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).heroInput=r.a.createRef(),n.handleClick=n.handleClick.bind(Object(h.a)(Object(h.a)(n))),n.handleSettingClick=n.handleSettingClick.bind(Object(h.a)(Object(h.a)(n))),n.handleModalClose=n.handleModalClose.bind(Object(h.a)(Object(h.a)(n))),n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRandomJoke()}},{key:"handleClick",value:function(e){this.props.joke.isLoading||this.props.fetchRandomJoke()}},{key:"handleSettingClick",value:function(e){e.stopPropagation(),this.props.openModal()}},{key:"handleChange",value:function(e){var t=this.heroInput.current.value;t?(this.props.changeAppHero(t),this.props.closeModal(),this.heroInput.current.style.borderColor="#dddddd"):this.heroInput.current.style.borderColor="#f44336"}},{key:"handleModalClose",value:function(){this.props.closeModal()}},{key:"renderJoke",value:function(){var e=this.props.joke,t=e.randomJoke,n=e.isLoading,a=e.error;return a?r.a.createElement(v,{error:a},r.a.createElement(E,{show:n})):r.a.createElement(m,{text:t||""},r.a.createElement(E,{show:n}))}},{key:"renderSettingBar",value:function(){return this.props.joke.error?null:r.a.createElement("aside",{className:"App-setting-bar"},r.a.createElement("button",{className:"App-button",onClick:this.handleSettingClick},r.a.createElement("img",{src:N.a,className:"App-button-icon",alt:"cog"})))}},{key:"renderModal",value:function(){var e=this.props.app.hero,t=this.props.modal.isOpen;return r.a.createElement(w,{open:t,title:"Joke Hero",handleClose:this.handleModalClose},r.a.createElement("div",{className:"App-hero-form"},r.a.createElement("input",{type:"text",className:"App-hero-input",defaultValue:e,ref:this.heroInput}),r.a.createElement("button",{className:"App-button App-hero-button",onClick:this.handleChange},"Save")))}},{key:"render",value:function(){return r.a.createElement("main",{className:"App",onClick:this.handleClick},this.renderJoke(),this.renderSettingBar(),this.renderModal())}}]),t}(a.Component),M=n(12),A=n.n(M),S=n(28),H=n(49),R=function(){var e="https://api.icndb.com";return{hero:"Chuck Norris",fetchRandomJoke:function(){return H.get("".concat(e,"/jokes/random?escape=javascript")).then(function(e){var t=e.data;return t&&"success"===t.type?Promise.resolve(decodeURIComponent(t.value.joke)):Promise.reject()}).catch(function(){throw new Error("Could not fetch a random joke =(")})}}}();function _(e,t,n){var a=new RegExp(t,"g");return e.replace(a,n)}var x="FETCH_RANDOM_JOKE",D="FETCH_RANDOM_JOKE_SUCCESS",I="FETCH_RANDOM_JOKE_FAILURE",L="CHANGE_RANDOM_JOKE_HERO";var P="CHANGE_APP_HERO";function T(e){return function(t,n){var a=n().app.hero;t({type:P,hero:e}),t(function(e,t){return{type:L,oldHero:e,newHero:t}}(a,n().app.hero))}}var B="OPEN_MODAL",F="CLOSE_MODAL";var K=Object(i.b)(function(e){return{app:e.app,joke:e.joke,modal:e.modal}},function(e){return{fetchRandomJoke:function(){return e(function(){var e=Object(S.a)(A.a.mark(function e(t,n){var a,r,o,c;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.app,t({type:x}),e.prev=2,e.next=5,R.fetchRandomJoke();case 5:o=e.sent,t({type:D,randomJoke:_(o,R.hero,r.hero)}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c=e.t0.message,t({type:I,error:c});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t,n){return e.apply(this,arguments)}}())},changeAppHero:function(t){return e(T(t))},openModal:function(){return e({type:B})},closeModal:function(){return e({type:F})}}})(J);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(4),G=n(29),W=n(3),V=R.hero,$={hero:V};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(W.a)({},e,{hero:t.hero||V});default:return e}},z={randomJoke:null,isLoading:!1,error:null};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(W.a)({},e,{isLoading:!0});case D:return Object(W.a)({},e,{randomJoke:t.randomJoke,error:null,isLoading:!1});case I:return Object(W.a)({},e,{error:t.error,isLoading:!1});case L:return Object(W.a)({},e,{randomJoke:_(e.randomJoke,t.oldHero,t.newHero)});default:return e}},X={isOpen:!1};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;switch((arguments.length>1?arguments[1]:void 0).type){case B:return Object(W.a)({},e,{isOpen:!0});case F:return Object(W.a)({},e,{isOpen:!1});default:return e}},Z=Object(U.c)({app:q,joke:Q,modal:Y});var ee,te=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(t){return}}(),ne=(ee=te,Object(U.d)(Z,ee,Object(U.a)(G.a)));ne.subscribe(function(e,t){var n,a;return function(){var r=this,o=arguments;a?(clearTimeout(n),n=setTimeout(function(){Date.now()-a>=t&&(e.apply(r,o),a=Date.now())},t-(Date.now()-a))):(e.apply(r,o),a=Date.now())}}(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.error(n.message||"Something went wrong!")}}({app:ne.getState().app})},1e3)),c.a.render(r.a.createElement(i.a,{store:ne},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.24162a3a.chunk.js.map